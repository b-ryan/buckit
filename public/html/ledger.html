<div id="ledger" ng-controller="LedgerCtrl">
  <div class="content">
    <h3>Ledger</h3>
    <select
      ng-model="account"
      ng-options="account.name for account in accounts"
      >
    </select>
    <table class="table table-bordered table-striped table-hover">
      <thead>
        <tr>
          <th>Date</th>
          <th>Payee</th>
          <th>Details</th>
          <th>Amount</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="transaction in transactions">
          <td>{{transaction.date}}</td>
          <td>{{transaction.payee.name}}</td>
          <td>{{transaction.splits | transactionDestination:account}}</td>
          <td>
            {{transaction.splits | transactionAmount:account | currency}}
          </td>
          <td>{{transaction.splits | transactionStatus:account}}</td>
        </tr>
      </tbody>
    </table>
    <div ng-controller="NewTransactionCtrl">
      <h3>Create a new transaction</h3>
      <div class="row">
        <div class="span6">
          <div class="form-horizontal">
            <div class="control-group">
              <label class="control-label">Date</label>
              <div class="controls">
                <div class="input-append">
                  <input
                    type="text"
                    datepicker-popup="MMMM dd, yyyy"
                    ng-model="date"
                    is-open="datepickerOpened"
                    ng-required="true"
                  />
                  <button class="btn" ng-click="openDatepicker()">
                    <i class="icon-calendar"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Payee</label>
              <div class="controls">
                <input type="text" auto-complete="payees:name"
                  ng-model="payeeName" ng-blur="updatePayeeId()" />
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Account</label>
              <div class="controls">
                <input type="text" auto-complete="accounts:name"
                  ng-model="destAccountName" ng-blur="updateAccountId()" />
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Amount</label>
              <div class="controls">
                <div class="input-prepend">
                  <span class="add-on">$</span>
                  <input type="text" ng-model="amount" />
                </div>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Status</label>
              <div class="controls">
                <select
                  ng-model="status"
                  ng-options="status for status in statuses"
                  >
                </select>
              </div>
            </div>
            <div class="control-group">
              <div class="controls">
                <button class="btn" ng-click="saveTransaction()">Save</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/ng-template" id="transactionModal.html">
  </script>
</div>
