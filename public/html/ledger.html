<div class="ledger" ng-controller="LedgerCtrl">
  <div class="container-fluid">
    <div class="col-xs-9">
    </div>
    <div class="col-xs-3">
      <select class="form-control"
              ng-model="account"
              ng-options="account.name for account in accounts">
      </select>
    </div>
  </div>
  <div class="transactions-view">
    <div class="container-fluid">
      <strong class="col-xs-1">Id</strong>
      <strong class="col-xs-2">Date</strong>
      <strong class="col-xs-3">Payee</strong>
      <strong class="col-xs-3">Category</strong>
      <strong class="col-xs-1">Amount</strong>
      <strong class="col-xs-2">Status</strong>
    </div>
    <div ng-repeat="transaction in transactions | filter:hasSplitForAccount">

      <div class="transaction-container" ng-controller="TransactionCtrl">
        <div class="container-fluid transaction-row-view"
             ng-if="!transaction.editing"
             ng-click="edit()">
          <div class="col-xs-1">{{transaction.id}}</div>
          <div class="col-xs-2">{{transaction.date | date:'yyyy-MM-dd'}}</div>
          <div class="col-xs-3">{{transaction.payee.name}}</div>
          <div class="col-xs-3">
            <div ng-show="non_account_splits.length > 1">Splits</div>
            <div ng-hide="non_account_splits.length > 1">
              {{non_account_splits[0].account.name}}
            </div>
          </div>
          <div class="col-xs-1">{{account_split.amount | currency}}</div>
          <div class="col-xs-2">{{account_split.reconciled_status}}</div>
        </div>
        <edit-transaction ng-if="transaction.editing"
                          account="account"
                          transaction="transaction">
        </edit-transaction>

      </div>

    </div>
  </div>

  <div>
    <button class="btn" ng-click="addTransaction()">Add transaction</button>
  </div>
</div>
